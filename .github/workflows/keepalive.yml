name: Keep Railway Backend Alive

on:
  schedule:
    # H…ôr 10 d…ôqiq…ôd…ô bir i≈ül…ôyir (Railway serverini oyaq saxlayƒ±r)
    - cron: '*/10 * * * *'
  workflow_dispatch:  # Manual olaraq da i≈ü…ô sala bil…ôrsiniz

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Backend Health Endpoint
        run: |
          # Railway backend URL
          BACKEND_URL="https://arazelectron-production.up.railway.app"
          
          echo "üîÑ Pinging backend: $BACKEND_URL/api/health"
          
          # Health endpoint-…ô ping g√∂nd…ôr
          response=$(curl -s -o /dev/null -w "%{http_code}" "$BACKEND_URL/api/health" || echo "000")
          
          if [ "$response" = "200" ]; then
            echo "‚úÖ Backend is alive! (HTTP $response)"
          else
            echo "‚ö†Ô∏è Backend returned: HTTP $response"
            echo "This is normal if the server is waking up from sleep."
          fi
          
      - name: Ping Root Endpoint
        run: |
          BACKEND_URL="https://arazelectron-production.up.railway.app"
          
          echo "üîÑ Pinging root: $BACKEND_URL/api/"
          
          response=$(curl -s -o /dev/null -w "%{http_code}" "$BACKEND_URL/api/" || echo "000")
          
          if [ "$response" = "200" ]; then
            echo "‚úÖ Root endpoint is alive! (HTTP $response)"
          else
            echo "‚ö†Ô∏è Root endpoint returned: HTTP $response"
          fi
